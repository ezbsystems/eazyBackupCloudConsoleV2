<!-- Mobile slide-out nav -->
<div
	x-show="$store.ui.mobileNavOpen"
	x-transition.opacity
	x-cloak
	class="fixed inset-x-0 bottom-0 top-nav-offset z-40 flex lg:hidden"
>
	<!-- Backdrop -->
	<button
		class="absolute inset-0 border-r border-muted bg-surface-2/90 backdrop-blur-xl z-40"
		@click="$store.ui.mobileNavOpen = false"
	></button>
	<!-- Panel -->
	<aside
		class="relative z-50 h-full w-72 max-w-full bg-surface-2/95 backdrop-blur-xl border-r border-muted flex flex-col transform transition-transform duration-300 -translate-x-full shadow-xl"
		:class="$store.ui.mobileNavOpen ? 'translate-x-0' : '-translate-x-full'"
	>


		<!-- Mobile nav links -->
		<nav class="flex-1 overflow-y-auto px-4 py-4" aria-label="Primary">
			<ul class="space-y-2 text-base">
				<li>
					<a href="/#hero"
					:aria-current="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'hero' ? 'page' : null"
					@click.prevent="
						$store.ui.mobileNavOpen = false;
						if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
							window.location.href = '/#hero';
						} else {
							$store.ui.scrollTo('hero');
						}
					"
					:class="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'hero'
						? 'group flex items-center justify-between rounded-xl px-3 py-3 font-medium text-slate-900 dark:text-slate-100 bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'
						: 'group block rounded-xl px-3 py-3 font-medium text-slate-800 dark:text-slate-300 hover:bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'">
						<span>Overview</span>
					</a>
				</li>

				<li>
					<a href="/#users"
					:aria-current="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'users' ? 'page' : null"
					@click.prevent="
						$store.ui.mobileNavOpen = false;
						if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
							window.location.href = '/#users';
						} else {
							$store.ui.scrollTo('users');
						}
					"
					:class="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'users'
						? 'group flex items-center justify-between rounded-xl px-3 py-3 font-medium text-slate-900 dark:text-slate-100 bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'
						: 'group block rounded-xl px-3 py-3 font-medium text-slate-800 dark:text-slate-300 hover:bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'">
						<span>Multi-User Storage</span>
					</a>
				</li>

				<li>
					<a href="/#products"
					:aria-current="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'products' ? 'page' : null"
					@click.prevent="
						$store.ui.mobileNavOpen = false;
						if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
							window.location.href = '/#products';
						} else {
							$store.ui.scrollTo('products');
						}
					"
					:class="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'products'
						? 'group flex items-center justify-between rounded-xl px-3 py-3 font-medium text-slate-900 dark:text-slate-100 bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'
						: 'group block rounded-xl px-3 py-3 font-medium text-slate-800 dark:text-slate-300 hover:bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'">
						<span>Why e3</span>
					</a>
				</li>

				<li>
					<a href="/#pricing-details"
					:aria-current="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'pricing-details' ? 'page' : null"
					@click.prevent="
						$store.ui.mobileNavOpen = false;
						if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
							window.location.href = '/#pricing-details';
						} else {
							$store.ui.scrollTo('pricing-details');
						}
					"
					:class="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'pricing-details'
						? 'group flex items-center justify-between rounded-xl px-3 py-3 font-medium text-slate-900 dark:text-slate-100 bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'
						: 'group block rounded-xl px-3 py-3 font-medium text-slate-800 dark:text-slate-300 hover:bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'">
						<span>Pricing</span>
					</a>
				</li>

				<li>
					<a href="https://accounts.eazybackup.ca/index.php?m=cloudstorage&page=handlesignup"
					:aria-current="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'trial' ? 'page' : null"
					@click.prevent="
						$store.ui.mobileNavOpen = false;
						if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
							window.location.href = 'https://accounts.eazybackup.ca/index.php?m=cloudstorage&page=handlesignup';
						} else {
							$store.ui.scrollTo('trial');
						}
					"
					:class="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'trial'
						? 'group flex items-center justify-between rounded-xl px-3 py-3 font-medium text-slate-900 dark:text-slate-100 bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'
						: 'group block rounded-xl px-3 py-3 font-medium text-slate-800 dark:text-slate-300 hover:bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'">
						<span>Free trial</span>
					</a>
				</li>

				<li>
					<div x-data="{ companyOpen: false }" @keydown.escape.window="companyOpen = false">
						<button
							type="button"
							@click="companyOpen = !companyOpen"
							:aria-expanded="companyOpen.toString()"
							aria-haspopup="menu"
							class="group flex w-full items-center justify-between rounded-xl px-3 py-3 font-medium text-slate-800 dark:text-slate-300 hover:bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400"
						>
							<span>Company</span>
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-5 w-5" :class="companyOpen ? 'rotate-180' : ''">
								<path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
							</svg>
						</button>
						<ul
							x-show="companyOpen"
							x-transition
							x-cloak
							class="mt-1 ml-4 space-y-1"
							role="menu"
						>
							<li>
								<a href="/company/" @click="$store.ui.mobileNavOpen = false" class="block rounded-lg px-3 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-surface-2" role="menuitem">About eazyBackup</a>
							</li>
							<li>
								<a href="/#contact" @click="
									$store.ui.mobileNavOpen = false;
									if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
										window.location.href = '/#contact';
									} else {
										$store.ui.scrollTo('contact');
									}
								" class="block rounded-lg px-3 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-surface-2" role="menuitem">Contact</a>
							</li>
							<li>
								<a href="#" @click="$store.ui.mobileNavOpen = false" class="block rounded-lg px-3 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-surface-2" role="menuitem">Support</a>
							</li>
						</ul>
					</div>
				</li>
				<li>
					<a href="/pricing-lab/"
					:aria-current="window.location.pathname === '/pricing-lab/' || window.location.pathname === '/pricing-lab/index.html' ? 'page' : null"
					@click="$store.ui.mobileNavOpen = false"
					:class="window.location.pathname === '/pricing-lab/' || window.location.pathname === '/pricing-lab/index.html'
					? 'group flex items-center justify-between rounded-xl px-3 py-3 font-medium text-slate-900 dark:text-slate-100 bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'
					: 'group block rounded-xl px-3 py-3 font-medium text-slate-800 dark:text-slate-300 hover:bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'">
						<span>Pricing Lab</span>
					</a>
				</li>
				<li>
					<a href="/#contact"
					:aria-current="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'contact' ? 'page' : null"
					@click.prevent="
						$store.ui.mobileNavOpen = false;
						if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
							window.location.href = '/#contact';
						} else {
							$store.ui.scrollTo('contact');
						}
					"
					:class="(window.location.pathname === '/' || window.location.pathname === '/index.html') && $store.ui.activeSection === 'contact'
						? 'group flex items-center justify-between rounded-xl px-3 py-3 font-medium text-slate-900 dark:text-slate-100 bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'
						: 'group block rounded-xl px-3 py-3 font-medium text-slate-800 dark:text-slate-300 hover:bg-surface-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400'">
						<span>Contact</span>
					</a>
				</li>
			</ul>
		</nav>


		<div class="border-t border-muted/60 dark:border-slate-900/70 px-4 py-4 flex items-center justify-between gap-3 text-xs">
			<!-- Theme menu (mobile) -->
			<div class="w-full flex-1">
				<a href="https://accounts.eazybackup.ca/" class="btn-outline-muted flex w-full justify-center text-base" @click="$store.ui.mobileNavOpen = false">
					Sign in
				</a>
			</div>
		</div>
	</aside>
</div>



